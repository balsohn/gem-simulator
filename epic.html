<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>에픽 보석 가공 시뮬레이터</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="nav-container">
            <a href="index.html" class="nav-btn">레어 보석 세공</a>
            <a href="epic.html" class="nav-btn active">에픽 보석 세공</a>
            <a href="solver.html" class="nav-btn">조각 맞추기</a>
        </div>
        <h1>💎 에픽 보석 가공 시뮬레이터</h1>

        <!-- 최상단: 단계 게이지 -->
        <div class="slots-container">
            <h3>📊 단계 게이지</h3>
            <div class="slots" id="slotsDisplay">
                <!-- 슬롯은 JavaScript로 생성됩니다 -->
            </div>
        </div>

        <!-- 메인 컨텐츠: 2열 레이아웃 -->
        <div class="main-content">
            <!-- 왼쪽: 보석 이미지 + 게임 상태 -->
            <div class="left-section">
                <div class="game-status">
                    <div class="status-item">
                        <span class="label">남은 시도:</span>
                        <span id="remainingTurns" class="value">8</span>
                    </div>
                    <div class="status-item">
                        <span class="label">현재 위치:</span>
                        <span id="currentPosition" class="value">1</span>
                    </div>
                    <div class="status-item">
                        <span class="label">현재 등급:</span>
                        <span id="currentGrade" class="value grade-rare">희귀</span>
                    </div>
                </div>

                <div class="gem-display">
                    <div class="gem-container">
                        <div id="gemSprite" class="gem rare-gem">💎</div>
                        <div id="movementEffect" class="movement-effect"></div>
                    </div>
                </div>
            </div>

            <!-- 오른쪽: 버튼들 + 최적 분석 -->
            <div class="right-section">
                <div class="crafting-methods">
                    <button id="hammer" class="craft-btn" onclick="craft('hammer')">
                        <div class="btn-title">세게 두드리기</div>
                        <div class="btn-range">+3 ~ +6</div>
                        <div class="btn-uses">무제한</div>
                        <div id="hammerProb" class="btn-probability"></div>
                    </button>
                    <button id="refine" class="craft-btn" onclick="craft('refine')">
                        <div class="btn-title">세공하기</div>
                        <div class="btn-range">-3 ~ +2</div>
                        <div class="btn-uses">남은 횟수: <span id="refineCount">3</span></div>
                        <div id="refineProb" class="btn-probability"></div>
                    </button>
                    <button id="stabilizer" class="craft-btn" onclick="craft('stabilizer')">
                        <div class="btn-title">안정제 사용</div>
                        <div class="btn-range">+0 ~ +4</div>
                        <div class="btn-uses">남은 횟수: <span id="stabilizerCount">3</span></div>
                        <div id="stabilizerProb" class="btn-probability"></div>
                    </button>
                </div>

                <!-- 상태별 최적 분석 -->
                <div class="analysis-card">
                    <h3>⚙️ 상태별 최적 분석</h3>
                    <div class="manual-advisor-inputs">
                        <div class="advisor-input">
                            <label for="manualPos">위치</label>
                            <input type="number" id="manualPos" value="0" min="0" max="16">
                        </div>
                        <div class="advisor-input">
                            <label for="manualTurns">턴</label>
                            <input type="number" id="manualTurns" value="8" min="0" max="8">
                        </div>
                        <div class="advisor-input">
                            <label for="manualRefine">세공</label>
                            <input type="number" id="manualRefine" value="3" min="0" max="3">
                        </div>
                        <div class="advisor-input">
                            <label for="manualStabilizer">안정제</label>
                            <input type="number" id="manualStabilizer" value="3" min="0" max="3">
                        </div>
                    </div>
                    <button onclick="getManualRecommendation()" class="analysis-btn">최적 행동 분석</button>
                    <div id="manualResult" class="simulation-result"></div>
                </div>
            </div>
        </div>

        <!-- 게임 결과 -->
        <div id="gameResult" class="game-result hidden">
            <h2 id="resultTitle"></h2>
            <p id="resultMessage"></p>
            <button onclick="resetGame()" class="reset-btn">다시 시작</button>
        </div>

        <!-- 로그 -->
        <div class="log-container">
            <h3>가공 기록</h3>
            <div id="gameLog" class="game-log"></div>
        </div>

        <!-- 통계 -->
        <div class="analysis-section">
            <div class="analysis-card">
                <h3>📊 확률 분석</h3>
                <button onclick="runSimulation()" class="analysis-btn">10,000회 시뮬레이션 실행</button>
                <div id="simulationResult" class="simulation-result"></div>
            </div>
        </div>
    </div>

    <script src="epic_optimizer.js"></script>
    <script src="epic_script.js"></script>
</body>
</html>
